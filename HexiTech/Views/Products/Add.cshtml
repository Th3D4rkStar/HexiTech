@model HexiTech.Models.Products.ProductFormModel

@{
    ViewBag.Title = "Add new product.";
}

<div class="row">
    <div class="col-sm-12 col-lg-8 col-xl-12">
        <h2 class="text-center">@ViewBag.Title</h2>
        <!-- Forms -->
        <form method="post">
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label asp-for="CategoryId"></label>
                    <select asp-for="CategoryId" id="selectCategory" class="form-control">
                        <option selected value="0">Choose...</option>
                        @foreach (var category in Model.Categories)
                        {
                            <option value="@category.Id">@category.Name</option>
                        }
                    </select>
                    <span asp-validation-for="CategoryId" class="small text-danger"></span>
                </div>
                <div class="form-group col-md-6">
                    <label asp-for="ProductTypeId">Type</label>
                    <select asp-for="ProductTypeId" id="selectType" class="form-control">
                        <option selected value="0">Choose...</option>
                        @foreach (var productType in Model.ProductTypes)
                        {
                            <option value="@productType.Id">@productType.Name</option>
                        }
                    </select>
                    <span asp-validation-for="ProductTypeId" class="small text-danger"></span>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-4">
                    <label asp-for="Brand"></label>
                    <input asp-for="Brand" class="form-control" placeholder="ASUS, Acer, MSI, NVidia...">
                    <span asp-validation-for="Brand" class="small text-danger"></span>
                </div>
                <div class="form-group col-md-4">
                    <label asp-for="Series"></label>
                    <input asp-for="Series" class="form-control" placeholder="ROG, GTX 10XX, RTX 30XX...">
                    <span asp-validation-for="Series" class="small text-danger"></span>
                </div>
                <div class="form-group col-md-4">
                    <label asp-for="Model"></label>
                    <input asp-for="Model" class="form-control" placeholder="ThinkPad X1, IdeaPad, ZenBook Pro...">
                    <span asp-validation-for="Model" class="small text-danger"></span>
                </div>
            </div>
            <div class="form-group">
                <label asp-for="ImageUrl"></label>
                <input asp-for="ImageUrl" class="form-control" placeholder="URL to the product image...">
                <span asp-validation-for="ImageUrl" class="small text-danger"></span>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label asp-for="Description"></label>
                    <textarea asp-for="Description" class="form-control" rows="10" placeholder="An adequate description about what the product is and does."></textarea>
                    <span asp-validation-for="Description" class="small text-danger"></span>
                </div>
                <div class="form-group col-md-6">
                    <label asp-for="Specifications"></label>
                    <textarea asp-for="Specifications" class="form-control" id="productSpecs" rows="10"
                              placeholder="- ...@for (int i = 0; i < 9; i++){Write(Environment.NewLine + "- ...");}"></textarea>
                    <span asp-validation-for="Specifications" class="small text-danger"></span>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label class="col-sm-2">Availability:</label>
                    <div class="col-sm-10">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" asp-for="Availability" name="Availability" value="1">
                            <label class="form-check-label" asp-for="Availability">Available.</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" asp-for="Availability" name="Availability" value="2">
                            <label class="form-check-label" asp-for="Availability">At warehouse.</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" asp-for="Availability" name="Availability" value="3">
                            <label class="form-check-label" asp-for="Availability">Out of stock.</label>
                        </div>
                        <span asp-validation-for="Availability" class="small text-danger"></span>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label asp-for="Price"></label>
                    <input type="number" class="form-control" asp-for="Price">
                    <span asp-validation-for="Price" class="small text-danger"></span>
                </div>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary col-md-12">Add Product</button>
            </div>
        </form>
    </div>
</div>

<!-- Scripts -->
@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#selectType').prop('disabled', true);

            $('#selectCategory').on('change',
                function() {
                    $.ajax({
                        url: '@Url.Action("GetCascadeTypes", "Products")',
                        type: 'POST',
                        dataType: 'json',
                        data: { catId: $('#selectCategory').val() },
                        success: function(data) {
                            $('#selectType').prop('disabled', $('#selectCategory').val() == 0 ? true : false);
                            $('#selectType').html('').append('<option value="0">Choose...</option>');
                            $(data).each(function (index, item) {
                                $('#selectType').append(`<option value="${item.id}">${item.name}</option>`);
                            });
                        }
                    });
                }
            );
        });
    </script>
}